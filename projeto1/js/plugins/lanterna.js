(function(){"use strict";let lanternActive=true,lanternLayer=null,LANTERN_RADIUS=200,DARKNESS_OPACITY=1,LIGHT_COLOR=0xFFFFCC,LIGHT_OPACITY=0.40,LIGHT_BLUR=5;function createLanternLayer(){if(!lanternLayer){lanternLayer=new PIXI.Container();SceneManager._scene.addChild(lanternLayer);let darkness=new PIXI.Graphics();darkness.beginFill(0x000000,DARKNESS_OPACITY);darkness.drawRect(0,0,Graphics.width,Graphics.height);darkness.endFill();lanternLayer.addChild(darkness);}}function updateLantern(){if(!lanternLayer)return;lanternLayer.removeChildren();let darkness=new PIXI.Graphics();darkness.beginFill(0x000000,DARKNESS_OPACITY);darkness.drawRect(0,0,Graphics.width,Graphics.height);darkness.endFill();lanternLayer.addChild(darkness);if(lanternActive){let light=new PIXI.Graphics();light.beginFill(LIGHT_COLOR,LIGHT_OPACITY);light.drawCircle($gamePlayer.screenX(),$gamePlayer.screenY()-24,LANTERN_RADIUS);light.endFill();light.blendMode=PIXI.BLEND_MODES.ADD;light.filters=[new PIXI.filters.BlurFilter(LIGHT_BLUR)];lanternLayer.addChild(light);}}function activateLantern(){lanternActive=true;createLanternLayer();}activateLantern();const originalUpdate=Scene_Map.prototype.update;Scene_Map.prototype.update=function(){originalUpdate.call(this);updateLantern();};})();